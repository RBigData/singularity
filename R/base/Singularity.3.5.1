Bootstrap: docker
From: ubuntu:bionic

%labels
  R_Version 3.5.1

%environment
  export LANG=en_US.UTF-8
  export LC_ALL=en_US.UTF-8

%apprun R
  exec R "--no-save --quiet --vanilla $@"

%apprun Rscript
  exec Rscript "--vanilla $@"

%runscript
  exec R "--no-save --quiet --vanilla $@"



%post
  export MAKE="make -j 5"
  export LC_ALL=en_US.UTF-8
  export LANG=en_US.UTF-8
  export VERSION="3.5.1"
  apt-get update
  apt-get install -y wget libopenblas-dev build-essential gfortran libreadline-dev libbz2-dev zlib1g-dev libpng-dev libjpeg-dev liblzma-dev libpcre3-dev libcurl4-openssl-dev
  cd /tmp
  wget https://cran.r-project.org/src/base/R-3/R-${VERSION}.tar.gz
  tar zxf R-${VERSION}.tar.gz
  cd R-${VERSION}
  ./configure --with-x=no --enable-R-shlib=no --enable-memory-profiling=no --with-blas="-lopenblas" --with-lapack
  make && make install
  rm -rf /tmp/R-${VERSION}*
